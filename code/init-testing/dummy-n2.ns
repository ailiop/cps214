#! /usr/bin/ns

#
# SCRIPT
#
#     dummy-n2.ns
#
# DESCRIPTION
#
#     Create a dummy 2-node network for use in Emulab.
#
# PARAMETERS
#
#     OS
#         The OS image to be loaded in every Emulab node.
#
#     BW
#         Bandwidth of the link between the 2 nodes.
#
#     DL
#         Delay on the link between the 2 nodes.
#
#     Qt
#         Queue type for the link between the 2 nodes.
#
# AUTHOR
#
#     Alexandros-Stavros Iliopoulos <ailiop@cs.duke.edu>
#



##################################################
## INCLUDE

source tb_compat.tcl



##################################################
## PARAMETERS

# set opt(OS) UBUNTU11-64-STD
set opt(OS) UBUNTU11-64-QUAGGA

set opt(BW) 100Mb
set opt(DL) 0.0ms
set opt(Qt) DropTail



##################################################
## MAIN SCRIPT

# create the network simulator object
set ns [new Simulator]

# create the network nodes
set n(1) [$ns node]
set n(2) [$ns node]

# load the desired OS on the nodes
tb-set-node-os $n(1) $opt(OS)
tb-set-node-os $n(2) $opt(OS)

# create the link between the nodes
set link(1) [$ns duplex-link $n(1) $n(2) $opt(BW) $opt(DL) $opt(Qt)]

# enable static routing on the network
$ns rtproto Static

# # have the nodes create the Quagga user and groups
# tb-set-node-startcmd $n(1) "/proj/DukeCPS214/exp/dummy-isp/bin/startup-all.csh 1 >& /tmp/startup-dummyisp.log"
# tb-set-node-startcmd $n(2) "/proj/DukeCPS214/exp/dummy-isp/bin/startup-all.csh 2 >& /tmp/startup-dummyisp.log"

# go!
$ns run
